<!DOCTYPE html>
<html class="no-js" lang="pt-br" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
	
<h:head>
	<script src="visjs/vis.js"></script>
	<script type="text/javascript" src="js/visminer.js"></script>
	<link href="visjs/vis.css" rel="stylesheet" type="text/css" />
	<link href="resources/visminerweb.css" rel="stylesheet" type="text/css" />

</h:head>

<h:body>
  <h:outputStylesheet name="visminerweb.css" />
  
      <div style="max-width: 25%">
       <p:panel id="filter" style="width:220px;"
		header="Filter" resizable="true" toggleable="true"
		toggleOrientation="horizontal" toggleSpeed="500" rendered="#{selector.repository != null}">
		<p:accordionPanel multiple="true" activeIndex="0,1" >
           <p:tab title="Evolution Filter" rendered="#{selector.tdView == 'EVOLUTION'}">  
           		<div style="text-align: center;">     	  
		            <p:slider for="minValue, maxValue" display="displayRange" style="width: 160px; margin-top:10px" 
		            		range="true" minValue="#{filterTD.minValueSlider}" maxValue="#{filterTD.maxValueSlider}" 
		            		displayTemplate="From {min} to {max}">
		            		<p:ajax event="slideEnd" process="minValue maxValue @this" listener="#{lineChartTDEvolution.reload}" update="form:lineChartTDEvolutionContainer" />
		            </p:slider>
					<h:outputText id="displayRange" value="From #{filterTD.initialVersionSlider} to #{filterTD.finalVersionSlider}" />
				    <h:inputHidden id="minValue" value="#{filterTD.initialVersionSlider}" />
				    <h:inputHidden id="maxValue" value="#{filterTD.finalVersionSlider}" />
			    </div>			   
           </p:tab>

           <p:tab title="TD Analyzer">	
                <p:selectOneMenu id="versionList" value="#{filterTD.idVersionSelected}" style="width:100%">
		            <f:selectItem itemLabel="Select Version" itemValue="0" />
		            <f:selectItems value="#{filterTD.selector.tags}" var="tag" itemValue="#{tag.id}" itemLabel="#{tag.name}"/>
		        </p:selectOneMenu>		              
	            <p:selectOneMenu id="tdList" value="#{filterTD.technicalDebt}" style="width:100%; margin-top:10px">
		            <f:selectItem itemLabel="Select TD" itemValue="all" />
		            <f:selectItem itemLabel="Design Debt" itemValue="DESIGN" />
		            <f:selectItem itemLabel="Code Debt" itemValue="CODE" />
		        </p:selectOneMenu>
		        <p:commandButton value="Analyze" id="btnAnalyze" onclick="PF('analyzeDialog').show();PF('analyzeProgressBar').start();"
		        				  style="width:100%; margin-top:10px" /> 
		        <p:dialog id="analyzeDialog" header="Analyzing..." modal="true" widgetVar="analyzeDialog" height="30">
		   			<p:progressBar id="progressBarClient" ajax="true" value="#{filterTD.progressBarValue}" labelTemplate="{value}%"
		   				global="false" widgetVar="analyzeProgressBar" style="width:400px; color:#E1E463" interval="1000" oncomplete="PF('analyzeDialog').hide(); PF('analyzeProgressBar').cancel();" >
		   				<p:ajax event="complete" listener="#{filterTD.cancelProgressBar}"/>
		   			</p:progressBar>
	  			</p:dialog>
           </p:tab>
        </p:accordionPanel>
	 </p:panel>	        	
      </div>
    	        
</h:body>
</html>